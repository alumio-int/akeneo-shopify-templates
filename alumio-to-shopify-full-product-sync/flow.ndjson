{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"alumio-to-shopify-products-incoming","name":"Alumio to Shopify - Products (Incoming)","description":"This scheduler is to run two incoming configrations :\n1. Fetch the Alumio base full products from Alumio storage\n2. Fetch the Synchronized products from Alumio storage (For Publish into Shopify publications)","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"synchronize-products-fetch-storage-product-model-alumio-base"}},{"prototype":"run-incoming","parameters":{"incoming":"shopify-fetch-synchronized-products-from-alumio-storage"}}],"handlers":[],"priority":2,"expression":"*/2 * * * *"}},"owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"synchronize-products-fetch-storage-product-model-alumio-base","name":"Synchronize Products - Fetch Storage Product Model Alumio Base","description":"This incoming will fetch the Full product Alumio base schema from Alumio storage","object":{"parameters":{"entityType":"alumio-base-product","subscriber":{"prototype":"storage-subscriber","parameters":{"storage":"alumio-product-model-parent-alumio-base-product-model"}},"transformers":["akeneo-to-shopify-products-filter-by-previous-storage-entities"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"alumio-product-model-parent-alumio-base-product-model","name":"Alumio - Product Model Parent - Alumio Base Product Model","description":"","object":{"parameters":{"path":"alumio-product-model-parent-alumio-base-product-model-01JP6KD9ZAAWXNRG0DW65H0970","logger":{"parameters":{"actions":[]}},"enablePruning":false}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-to-shopify-products-filter-by-previous-storage-entities","name":"Akeneo to Shopify - Products - FIlter By Previous storage entities","description":"This transformer will filter all the entities that already processed before (have a same entity data)","object":{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-to-shopify-products-delta-storage","addEntityToStorage":true}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-to-shopify-products-delta-storage","name":"Akeneo to Shopify - Products - Delta Storage","description":"","object":{"parameters":{"path":"akeneo-to-shopify-products-delta-storage-01JPWFGC5DNRYRJHWPSKG2T9M0","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"shopify-fetch-synchronized-products-from-alumio-storage","name":"Shopify - Fetch Synchronized Products from Alumio Storage ","description":"Fetch All Sinchronized Products from Alumio Storage","object":{"parameters":{"subscriber":{"prototype":"storage-subscriber","parameters":{"storage":"shopify-product-title-to-id","groupSize":1000,"groupItems":true}},"transformers":["shopify-products-prepare-publishing-branches","shopify-set-base-information","shopify-products-prepare-publishing-properties","shopify-products-prepare-publishing-filter-by-previous-stored-entities"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopify-product-title-to-id","name":"Shopify - Product - Title to ID","description":"","object":{"parameters":{"path":"shopify-product-title-to-id-01JP74ENXEE7GN5QHZNSVX195G","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-prepare-publishing-branches","name":"Shopify Products - Prepare Publishing - Branches","description":"To branch the items into separated products ready to publish into publications","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*","conditions":[],"replacement":"products.$1.id"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"string-replace","parameters":{"search":"gid://shopify/Product/"}},{"prototype":"string-prepend","parameters":{"prepend":"gid://shopify/Product/"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}}}}]}},{"meta":[],"prototype":"brancher","parameters":{"pattern":"products.*","entityType":"shopify-products"}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-set-base-information","name":"Shopify - Set - Base Information","description":"This transformer is an input from the User\nThe parameter that can be set is :\n1. Publish (whether user want to publish the synchronized products into Shopify shops/channels/publications\n2. Default Currentcy, this will define the default price for each product variants and put the other currencies into metafields\n3. ProductOptions (Axes), this list will be used when Alumio can't get the correct Axes for variants.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":{"name":"Set Predefined Information"},"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":{"name":"Set Base Information"},"prototype":"value-setter","parameters":{"configurations":[{"key":"published","value":true,"mappers":[]},{"key":"default_currency","value":"EUR","mappers":[]}]}},{"meta":{"name":"Set Channels/Publications Lists"},"prototype":"value-setter","parameters":{"configurations":[{"key":"channels","value":["Online Store","Shop"],"mappers":[]}]}},{"meta":{"name":"Set Product Properties"},"prototype":"value-setter","parameters":{"configurations":[{"key":"product_options","value":["size","color"],"mappers":[]}]}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":["locales","tax","channels","price_properties","product_options","product_category","stocks","associations","metadata","attributes","searchable","searchable_locales","approval_status","published","default_currency"]}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"_config"}},"stripEnclosures":true}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-prepare-publishing-properties","name":"Shopify - Products - Prepare publishing properties","description":"Prepare the Products publish properties (payload)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"_config.published"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":1}},{"prototype":"equals","parameters":{"value":true}}]}}]}}],"transformers":[]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"_config.published"}},"conditions":[{"prototype":"one-of","parameters":{"value":[true,1]}}]}}],"transformers":[{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"productPublications","value":"&{_config.channels || `[]`}","mappers":[]}]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"productPublications.*","conditions":[],"replacement":"productPublications.$1.publicationId"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productPublications.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopify-channels-name-to-id","storageKey":"&{publicationId}","destination":"publicationId"}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"children"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"productPublications":"&{productPublications || `[]`}"},"childrenPattern":"children.*"}}],"elseTransformers":[]}}]}}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["_config"]}},"conditions":[]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopify-channels-name-to-id","name":"Shopify - Channels - Name to ID","description":"","object":{"parameters":{"path":"shopify-channels-name-to-id-01JQC139ZV4XKRSDJST5MCZAMG","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-prepare-publishing-filter-by-previous-stored-entities","name":"Shopify - Products - Prepare publishing - Filter by previous stored entities","description":"Filter previously synchronized products that already processed","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[]}},{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"shopify-published-products","comparator":"equals-adaptive","addEntityToStorage":true}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopify-published-products","name":"Shopify - Published products","description":"","object":{"parameters":{"path":"shopify-published-products-01JQDSBBV50DGN7MJXHXJQXD75","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"alumio-to-shopify-products-route-outgoing","name":"Alumio to Shopify - Products (Route/Outgoing)","description":"To run the Route of \"Synchronization Products - Akeneo to Shopify\" and execute 100 tasks per run\n(You can change the \"number of tasks to export\")","object":{"parameters":{"job":[{"prototype":"run-outgoing","parameters":{"route":"synchronize-products-akeneo-to-shopify","numTasks":100}}],"handlers":[],"priority":2,"expression":"*/5 * * * *"}},"owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-products-akeneo-to-shopify","name":"Synchronize Products - Akeneo to Shopify","description":"This route is for Synchronize the products from ALumio Base storage and send it into Shopify Products","object":{"parameters":{"incoming":"synchronize-products-fetch-storage-product-model-alumio-base","outgoing":"shopify-send-product","realtime":false,"transformers":[],"waitingStatus":false,"parallelExecution":[]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"shopify-send-product","name":"Shopify - Send Product","description":"Sending the Full products into Shopify Product and variant","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["shopify-products-preparation-convert-from-alumio-base-1","shopify-send-products"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-1","name":"Shopify - Products - Preparation - Convert from Alumio base","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product, Childrens & Variants)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["shopify-set-base-information","shopify-products-preparation-convert-from-alumio-base-base-mapping","shopify-products-preparation-convert-from-alumio-base-childrens-mapping","shopify-products-preparation-convert-from-alumio-base-variants-mapping"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product)\n- General Fields\n- Name\n- Description\n- Localization Custom Attributes\n- Custom Attributes\n- ProductOptions","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["shopify-products-preparation-convert-from-alumio-base-base-mapping-general","shopify-products-preparation-convert-from-alumio-base-base-mapping-name","shopify-products-preparation-convert-from-alumio-base-base-mapping-description","shopify-products-preparation-convert-from-alumio-base-base-mapping-localization-custom-attributes","shopify-products-preparation-convert-from-alumio-base-base-mapping-custom-attributes","shopify-products-preparation-convert-from-alumio-base-base-mapping-productoptions","shopify-products-preparation-convert-from-alumio-base-base-mapping-finalize"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-general","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping - General","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product) - General Fields, such as Identifier etc","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"handle","value":"&{identifier || code}","mappers":[{"prototype":"string-replace","parameters":{"search":" ","replace":"-"}}]},{"key":"vendor","value":"&{customAttributes.brand || customAttributes.supplier || ``}","mappers":[]},{"key":"status","value":"&{statusCode || `false`}","mappers":[{"prototype":"dictionary-map","parameters":{"map":[[true,"ACTIVE"],[false,"DRAFT"]],"comparator":"equals"}}]},{"key":"productType","value":"&{attributeSetCode || ``}","mappers":[]}]}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"categories.*.categoryCode","conditions":[],"replacement":"tags.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-implode","parameters":{"glue":", "}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"tags"}}}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"categories.*.categoryCode","conditions":[],"replacement":"collectionsToJoin.$1"}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-name","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping - Name","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product) - Name & Title","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"title","value":"&{localizations[?localeCode=='en_US'].customAttributes.name }","mappers":[]},{"key":"title","value":"&{code || title[0]}","mappers":[]}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-description","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping - Description","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product) - Description","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"description","value":"&{localizations[?localeCode=='en_US'].customAttributes.description || localizations[?localeCode=='en_US'].customAttributes.short_description}","mappers":[]},{"key":"description","value":"&{description[0] || ``}","mappers":[]},{"key":"descriptionHtml","value":"&{description}","mappers":[]}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-localization-custom-attributes","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping - Localization Custom Attributes","description":"Mapping Localization Custom Attributes into Product Metafields","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"localizations"}}}}],"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizations.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-copy","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"customAttributes"}},"destination":{"prototype":"structure","parameters":{"key":"key","keys":[],"root":"metafields","value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"locale":"&{localeCode}"},"childrenPattern":"metafields.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizations.*.metafields.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"key","value":"&{key}_&{locale}","mappers":[]},{"key":"type","value":"string","mappers":[]},{"key":"namespace","value":"localizations_custom_attributes","mappers":[]}]}},{"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-string","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["locale"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"localizations.*.metafields.*","conditions":[],"replacement":"localizations_metafields.$1$2"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizations_metafields"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"metafields","value":["&{metafields || `[]`}","&{localizations_metafields || `[]`}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["localizations_metafields"]}},"conditions":[]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-custom-attributes","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping - Custom Attributes","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product) - Custom Attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"customAttributes"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"customAttributes"}},"destination":{"prototype":"structure","parameters":{"key":"key","keys":[],"root":"customAttributes","value":"value"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"customAttributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"value.unit"}}}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"value.amount"}}}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}},"conditions":[{"prototype":"type-array","parameters":{"strict":true}}]}},"transformer":{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-implode","parameters":{"glue":","}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}}}}}],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"value","value":"&{value.amount} &{value.unit}","mappers":[]}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"type","value":"string","mappers":[]},{"key":"namespace","value":"custom_attributes","mappers":[]}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-string","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}}}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"metafields","value":["&{metafields || `[]`}","&{customAttributes || `[]`}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-productoptions","name":"Shopify - Products - Preparation - Convert from Alumio base - Base mapping - ProductOptions","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product) - ProductOptions","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variants"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"akeneo-family-variants-axes","storageKey":"&{productType}","destination":"temporary"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"_config.product_options","value":"&{temporary.product_options || _config.product_options || `[]`}","mappers":[]}]}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["temporary"]}},"conditions":[]}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"variants.*.customAttributes.*","conditions":[],"replacement":"tempCustomAttributes.$1.$2"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"tempCustomAttributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"pattern","parameters":{"keys":[],"pattern":"*"}},"destination":{"prototype":"structure","parameters":{"key":"name","keys":[],"value":"value"}},"stripEnclosures":true}},{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"tempCustomAttributes"}}}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"selected_options":"&{_config.product_options}"},"childrenPattern":"tempCustomAttributes.*"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"tempCustomAttributes","value":"&{tempCustomAttributes[?contains(selected_options, name)]}","mappers":[]}]}},{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"key","parameters":{"keys":[],"root":"tempCustomAttributes"}}}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"tempCustomAttributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"value.unit"}}}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"value.amount"}}}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}},"conditions":[{"prototype":"type-array","parameters":{"strict":true}}]}},"transformer":{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-implode","parameters":{"glue":","}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value"}}}}}],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-float","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"value.amount"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"value","value":"&{value.amount} &{value.unit}","mappers":[]}]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"group-by","parameters":{"path":"name","pattern":"tempCustomAttributes.*","destination":"productOptions"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"productOptions.*.*.value","conditions":[],"replacement":"productOptions.$1.values.$2.name"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"productOptions.*.*.name","conditions":[],"replacement":"productOptions.$1.name"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productOptions"}}}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"name":true,"values":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productOptions.*"}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["tempCustomAttributes"]}},"conditions":[]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productOptions.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"group-by","parameters":{"path":"name","pattern":"values.*","destination":"values"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-keys","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values"}}}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.*","conditions":[],"replacement":"values.$1.name"}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-family-variants-axes","name":"Akeneo - Family Variants Axes","description":"","object":{"parameters":{"path":"akeneo-family-variants-axes-01JQEQQZZWEW2YQV2FA1VRVXCD","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-base-mapping-finalize","name":"Shopify - Products - Preparation - Convert from Alumio base -  Base mapping -  Finalize","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product) - Finalize the structure","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"id":1,"tags":1,"image":1,"media":1,"title":1,"handle":1,"status":1,"vendor":1,"children":1,"position":1,"variants":1,"metafields":1,"description":1,"displayName":1,"productType":1,"translations":1,"productOptions":1,"descriptionHtml":1,"collectionsToJoin":1,"combinedListingRole":1,"productPublications":1}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-childrens-mapping","name":"Shopify - Products - Preparation - Convert from Alumio base -  Childrens mapping","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Product Childrens - If any)","object":{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"children"}}}}],"transformers":[{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"combinedListingRole","value":"PARENT","mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"children.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-set-base-information","shopify-products-preparation-convert-from-alumio-base-base-mapping","shopify-products-preparation-convert-from-alumio-base-variants-mapping"]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-variants-mapping","name":"Shopify - Products - Preparation - Convert from Alumio base -  Variants mapping","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Variants)","object":{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variants"}}}}],"transformers":[{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variants.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-set-base-information","shopify-products-preparation-convert-from-alumio-base-variants-mapping-general","shopify-products-preparation-convert-from-alumio-base-variants-mapping-price","shopify-products-preparation-convert-from-alumio-base-base-mapping-name","shopify-products-preparation-convert-from-alumio-base-variants-mapping-optionsvalue","shopify-products-preparation-convert-from-alumio-base-base-mapping-localization-custom-attributes","shopify-products-preparation-convert-from-alumio-base-base-mapping-custom-attributes","shopify-products-preparation-convert-from-alumio-base-variants-mapping-finalize"]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-variants-mapping-general","name":"Shopify - Products - Preparation - Convert from Alumio base -  Variants mapping -  General","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Variants) -  SKU, Barcode ","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"sku","value":"&{code || ``}","mappers":[]},{"key":"barcode","value":"&{barcode || code || ``}","mappers":[]}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-variants-mapping-price","name":"Shopify - Products - Preparation - Convert from Alumio base -  Variants mapping -  Price","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Variants) - Price","object":{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"prices"}}}}],"transformers":[{"meta":{"name":"GET CURRENT PRICE (USD)"},"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"default_currency":"&{_config.default_currency}"},"childrenPattern":"prices.*"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"price","value":"&{prices[?currencyCode==default_currency] || prices[?currencyCode==`EUR`] || prices[?currencyCode==`USD`] | [0].amount }","mappers":[]}]}}]}},{"meta":{"name":"GET ADDITIONAL PRICES"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"prices.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"value","value":"&{amount || ``}","mappers":[{"prototype":"cast-string","parameters":[]}]},{"key":"key","value":"price_&{currencyCode || ``}","mappers":[]},{"key":"namespace","value":"custom_prices","mappers":[]},{"key":"type","value":"string","mappers":[]}]}},{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"key":true,"type":true,"value":true,"namespace":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"metafields","value":["&{metafields || `[]`}","&{prices || `[]`}"],"mappers":[{"prototype":"operator","parameters":{"operator":"array-merge"}}]}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-variants-mapping-optionsvalue","name":"Shopify - Products - Preparation - Convert from Alumio base -  Variants mapping -  OptionsValue","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Variants) - OptionValues","object":{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"customAttributes"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"akeneo-family-variants-axes","storageKey":"&{attributeSetCode}","destination":"temporary"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"_config.product_options","value":"&{temporary.product_options || _config.product_options || `[]`}","mappers":[]}]}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"customAttributes.*","conditions":[],"replacement":"optionValues.$1"}}]}},{"meta":{"name":"GET ADDITIONAL PRICES"},"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"optionValues"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"pattern","parameters":{"keys":[],"pattern":"*"}},"destination":{"prototype":"structure","parameters":{"key":"key","keys":[],"value":"name"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"optionValues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"name.unit"}}}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"name.amount"}}}}]}}],"elseCases":[{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"name"}},"conditions":[{"prototype":"type-array","parameters":{"strict":true}}]}},"transformer":{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-implode","parameters":{"glue":","}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"name"}}}}}],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"cast-float","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"name.amount"}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"name","value":"&{name.amount} &{name.unit}","mappers":[]}]}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"selected_options":"&{_config.product_options}"},"childrenPattern":"optionValues.*"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"optionValues","value":"&{optionValues[?contains(selected_options, key)]}","mappers":[]}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"optionValues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["selected_options"]}},"conditions":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"optionValues"}}}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-preparation-convert-from-alumio-base-variants-mapping-finalize","name":"Shopify - Products - Preparation - Convert from Alumio base -  Variants mapping -  Finalize","description":"This transformer will convert from Alumio Base schema into Full Shopify Product Structure (Variants) - Finalize the structure","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"id":1,"sku":1,"image":1,"media":1,"price":1,"title":1,"handle":1,"barcode":1,"taxCode":1,"taxable":1,"position":1,"metafields":1,"displayName":1,"optionValues":1,"translations":1,"selectedOptions":1,"unitPriceMeasurement":1}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-products","name":"Shopify - Send Products","description":"This Transformer will Transform products and variant including children, send it into shopify, and archive important ID to use before sending.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["shopify-prepare-send-products-children",{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["product"]}},"conditions":[{"prototype":"type-array","parameters":{"strict":true}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"product"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[]}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"product"}},"stripEnclosures":true}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-prepare-send-products","shopify-send-products-products-create-or-update"]}}]}}]}}],"elseTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-prepare-send-products","shopify-send-products-products-create-or-update"]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-prepare-send-products-children","name":"Shopify - Prepare Send - Products Children","description":"This Transformer will Change the format and Prepare Data for Children Product (if there are any)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[]}},"destination":{"prototype":"key","parameters":{"keys":[],"root":"product"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"product.children"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["combinedListingRole"],"root":"product"}},"conditions":[]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"product.children","conditions":[],"replacement":"children"}},{"meta":[],"prototype":"convert-to-array","parameters":{"pattern":"product","recursive":false}},{"meta":[],"prototype":"operator","parameters":{"left":"product","right":"children","operator":"array-merge"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["children"]}},"conditions":[]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-prepare-send-products","name":"Shopify - Prepare Send - Products","description":"This Transformer will Prepare Products before sending into shopify, change collection into IDs, check existing product IDs, and filter unused key.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"product.variants","conditions":[],"replacement":"variant"}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-prepare-send-products-collections-join","shopify-prepare-send-products-get-id","shopify-prepare-send-products-filter-keys"]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-prepare-send-products-collections-join","name":"Shopify - Prepare Send - Products - Collections - Get ID","description":"This transformer will Swap collections name into IDs and remove collections that are not listed in storage.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"product.collectionsToJoin.*","conditions":[],"replacement":"collectionsTemp.$1.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"collectionsTemp.*"}}}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"collectionsTemp"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["0","temp"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopify-collections-title-to-id","storageKey":"&{temp}","destination":"idTemp"}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["collectionsToJoin"],"root":"product"}},"conditions":[]}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"collectionsTemp.*.idTemp","conditions":[],"replacement":"product.collectionsToJoin.$1"}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["collectionsTemp"]}},"conditions":[]}},{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"key","parameters":{"keys":[],"root":"product.collectionsToJoin"}}}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopify-collections-title-to-id","name":"Shopify - Collections - Title to ID","description":"","object":{"parameters":{"path":"shopify-collections-title-to-id-01JPHP0BXRMADAA0EW4SVZQH64","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-prepare-send-products-get-id","name":"Shopify - Prepare Send - Products - Get ID","description":"This Transformer will Get an exisitng Product ID from storage.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["product"]}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopify-product-title-to-id","storageKey":"&{title}","destination":"id"}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-prepare-send-products-filter-keys","name":"Shopify - Prepare Send - Products - Filter Keys","description":"This Transformer will filter unused keys or any unaccepted keys on shopify.","object":{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["product"]}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["description"]}},"conditions":[]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-products-products-create-or-update","name":"Shopify - Send Products - Products - Create or Update","description":"This Transformer will create or update Products and Product Variants, and store important IDs for future use. (This also include transforming data for Product Variants)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"product.id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-send-poducts-create"]}}],"elseTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-send-products-update"]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-poducts-create","name":"Shopify - Send - Poducts - Create","description":"This Transformer will create Products and Product Variants, and store important IDs for future use. (This also include transforming data for Product Variants) ","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation productCreate($product: ProductCreateInput) {\n  productCreate(product: $product) {\n    product {\n      id\n      title\n      descriptionHtml\n      collections(first: 10) { \n        nodes {\n         id\n        }\n       }\n      options {\n        id\n        name\n        position\n        optionValues {\n          id\n          name\n          hasVariants\n        }\n      }\n      variants(first: 100) {\n        edges {\n          node {\n            id\n            title\n            price\n            sku\n          }\n        }\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"product":"&{product}"}}}}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-post-create-products-archive-product"]}}]}}}}]}},"shopify-send-poducts-create-variant","shopify-send-poducts-archive-variants"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"shopify-client","name":"Shopify - Client","description":"","object":{"prototype":"shopify-http-client-v3","parameters":{"token":"${SHOPIFY_PERSONAL_ACCESS_TOKEN}","baseUri":"${SHOPIFY_BASE_URI}","advanced":[]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-post-create-products-archive-product","name":"Shopify - Post Create - Products - Archive Product","description":"This transformer will Store product IDs for use later","object":{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"data.productCreate.product.id"}}}}],"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["product"],"root":"data.productCreate"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"id","storage":"shopify-product-title-to-id","storageKey":"&{title}"}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-poducts-create-variant","name":"Shopify - Send - Poducts - Create - Create and Update Variant","description":"This Transformer will create or update Product Variants (This also include transforming data for Product Variants) ","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"result.data.productCreate.product.id"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"variant.*.sku","conditions":[],"replacement":"variantCount.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-count","parameters":[]}],"accessor":{"prototype":"key","parameters":{"keys":["variantCount"]}}}}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["variantCount"]}},"conditions":[{"prototype":"equals","parameters":{"value":1}}]}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result.data.productCreate.product.id","conditions":[],"replacement":"productIdTemp"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result.data.productCreate.product.variants.edges.*.node.id","conditions":[],"replacement":"defaultVariantIdTemp"}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result.data.productCreate.product.variants.edges.*.node.title","conditions":[],"replacement":"defaultVariantTitle"}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"variantUpdate","value":{"variants":"&{variant}","productId":"&{result.data.productCreate.product.id}"},"mappers":[]}]}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"result.data.productCreate.product.variants.edges.*.node.id","conditions":[],"replacement":"variantUpdate.variants.0.id"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"variantUpdate.variants"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["title","optionValues"]}},"conditions":[]}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"sku","conditions":[],"replacement":"inventoryItem.sku"}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"variantResult":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation productVariantsBulkUpdate($productId: ID!, $variants: [ProductVariantsBulkInput!]!) {\n  productVariantsBulkUpdate(productId: $productId, variants: $variants) {\n    product {\n      id\n    }\n    productVariants {\n      id\n      metafields(first: 2) {\n        edges {\n          node {\n            namespace\n            key\n            value\n          }\n        }\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"variants":"&{variantUpdate.variants}","productId":"&{variantUpdate.productId}"}}}}}}}]}}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["variantCount"]}},"conditions":[{"prototype":"not-equals","parameters":{"value":1}}]}}],"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"variant"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"optionValues.*.name","conditions":[],"replacement":"name.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-concat","parameters":{"glue":" / "}}],"accessor":{"prototype":"key","parameters":{"keys":["name"]}}}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"productResultID":"&{result.data.productCreate.product.id}","variantResultID":"&{result.data.productCreate.product.variants.edges[0].node.id}","variantResultTitle":"&{result.data.productCreate.product.variants.edges[0].node.title}"},"childrenPattern":"variant.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variant.*.optionValues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["key","optionName"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"variant"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"idExist","value":"&{name == variantResultTitle}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["idExist"]}},"conditions":[{"prototype":"equals","parameters":{"value":true}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"variantResultUpdate":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation productVariantsBulkUpdate($productId: ID!, $variants: [ProductVariantsBulkInput!]!) {\n  productVariantsBulkUpdate(productId: $productId, variants: $variants) {\n    product {\n      id\n    }\n    productVariants {\n      id\n      metafields(first: 2) {\n        edges {\n          node {\n            namespace\n            key\n            value\n          }\n        }\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"variants":[{"id":"&{variantResultID}","price":"&{price}","barcode":"&{barcode}","metafields":"&{metafields}"}],"productId":"&{productResultID}"}}}}}}}],"elseTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"variantResultCreate":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation ProductVariantsCreate($productId: ID!, $variants: [ProductVariantsBulkInput!]!) {\n  productVariantsBulkCreate(productId: $productId, variants: $variants) {\n    productVariants {\n      id\n      title\n      selectedOptions {\n        name\n        value\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"variants":[{"price":"&{price}","barcode":"&{barcode}","metafields":"&{metafields}","optionValues":"&{optionValues}"}],"productId":"&{productResultID}"}}}}}}}]}}]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-poducts-archive-variants","name":"Shopify - Send - Poducts - Create - Archive Variants","description":"This Transformer will store important IDs for future use.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variantResult"}}}}],"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"variantResult.data.productVariantsBulkUpdate.productVariants.*.id","conditions":[],"replacement":"variant.0.productVariantID"}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"defaultVariantIdTemp","storage":"shopify-products-variant-productid-and-variantname-to-variantid","storageKey":"&{productIdTemp} | &{defaultVariantTitle}"}}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"variant"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variantResultUpdate"}}}}],"elseCases":[{"filter":{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"variantResultCreate"}}}},"transformer":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"variantResultCreate.data.productVariantsBulkCreate.productVariants.*.id","conditions":[],"replacement":"productVariantID"}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"productVariantID","storage":"shopify-products-variant-productid-and-variantname-to-variantid","storageKey":"&{productResultID} | &{name}"}}]}}}],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"variantResultUpdate.data.productVariantsBulkUpdate.productVariants.*.id","conditions":[],"replacement":"productVariantID"}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"productVariantID","storage":"shopify-products-variant-productid-and-variantname-to-variantid","storageKey":"&{productResultID} | &{name}"}}],"elseTransformers":[]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"shopify-products-variant-productid-and-variantname-to-variantid","name":"Shopify - Products Variant - ProductID & VariantName to VariantID","description":"","object":{"parameters":{"path":"shopify-products-variant-productid-and-variantname-to-variantid-01JQB3BPYR5EFVZB6YMWSZHCFH","logger":{"parameters":{"actions":[]}}}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-products-update","name":"Shopify - Send - Products - Update","description":"This Transformer will update Products and Create/Update Product Variants, and store important IDs for future use. (This also include transforming data for Product Variants)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["productOptions"],"root":"product"}},"conditions":[]}},{"meta":[],"prototype":"merger","parameters":{"template":{"result":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation productUpdate($product: ProductUpdateInput!) {\n  productUpdate(product: $product) {\n    product {\n      id\n      title\n      descriptionHtml\n      collections(first: 10) { \n        nodes {\n         id\n        }\n       }\n      options {\n        id\n        name\n        position\n        optionValues {\n          id\n          name\n          hasVariants\n        }\n      }\n      variants(first: 100) {\n        edges {\n          node {\n            id\n            title\n            price\n            sku\n          }\n        }\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"product":"&{product}"}}}}}}}]}},"shopify-send-poducts-update-create-and-update-variant"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-poducts-update-create-and-update-variant","name":"Shopify - Send - Poducts - Update - Create and Update Variant","description":"This Transformer will Create and/or Update Product Variants, and store important IDs for future use. (This also include transforming data for Product Variants)  ","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"result.data.productUpdate.product.id"}}}}],"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variant.*.optionValues.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["key","optionName"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"productID":"&{product.id}"},"childrenPattern":"variant.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"variant"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["optionValues"]}},"conditions":[{"prototype":"not-empty","parameters":[]}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"optionValues.*.name","conditions":[],"replacement":"combinedName.$1"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-concat","parameters":{"glue":" / "}}],"accessor":{"prototype":"key","parameters":{"keys":["combinedName"]}}}}],"elseTransformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"combinedName","value":"Default Title","mappers":[]}]}}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"shopify-products-variant-productid-and-variantname-to-variantid","storageKey":"&{productID} | &{combinedName}","destination":"productVariantID"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"productVariantID"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"updateResult":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation productVariantsBulkUpdate($productId: ID!, $variants: [ProductVariantsBulkInput!]!) {\n  productVariantsBulkUpdate(productId: $productId, variants: $variants) {\n    product {\n      id\n    }\n    productVariants {\n      id\n      metafields(first: 2) {\n        edges {\n          node {\n            namespace\n            key\n            value\n          }\n        }\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"variants":[{"id":"&{productVariantID}","price":"&{price}","barcode":"&{barcode}","metafields":"&{metafields}"}],"productId":"&{productID}"}}}}}}}],"elseTransformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"createResult":"&{@}"},"transformer":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation ProductVariantsCreate($productId: ID!, $variants: [ProductVariantsBulkInput!]!) {\n  productVariantsBulkCreate(productId: $productId, variants: $variants) {\n    productVariants {\n      id\n      title\n      selectedOptions {\n        name\n        value\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"variants":[{"price":"&{price}","barcode":"&{barcode}","metafields":"&{metafields}","optionValues":"&{optionValues}"}],"productId":"&{productID}"}}}}}]}}}}]}},{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["shopify-send-poducts-update-archive-variants"]}}]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-send-poducts-update-archive-variants","name":"Shopify - Send - Poducts - Update - Archive Variants","description":"This Transformer will store important Product Variants IDs for future use.","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"createResult"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"createResult.data.productVariantsBulkCreate.productVariants.*.id","conditions":[],"replacement":"newVariantID"}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"newVariantID","storage":"shopify-products-variant-productid-and-variantname-to-variantid","storageKey":"&{productID} | &{combinedName}"}}],"elseTransformers":[]}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"alumio-to-shopify-publish-products-route-outgoing","name":"Alumio to Shopify - Publish Products (Route/Outgoing)","description":"To run the Route of \"Synchronization Products - Akeneo to Shopify - Publish Products to Shopify Channels\" and execute 100 tasks per run\n(You can change the \"number of tasks to export\")","object":{"parameters":{"job":[{"prototype":"run-outgoing","parameters":{"route":"synchronize-products-akeneo-to-shopify-publish-products-to-shopify-channels","numTasks":100}}],"handlers":[],"priority":2,"expression":"*/5 * * * *"}},"owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-products-akeneo-to-shopify-publish-products-to-shopify-channels","name":"Synchronize Products - Akeneo to Shopify - Publish Products to Shopify Channels","description":"This route will send all the synchronized products into Shopify Channels/Stores/Publications","object":{"parameters":{"incoming":"shopify-fetch-synchronized-products-from-alumio-storage","outgoing":"shopify-publish-to-channels","realtime":false,"transformers":[],"waitingStatus":false,"parallelExecution":[]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"shopify-publish-to-channels","name":"Shopify - Publish to Channels","description":"Publish the Synchronized Products into Shopify Channels/Stores/Publications","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["shopify-products-prepare-publishing-create-payload-and-publish-the-products"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"shopify-products-prepare-publishing-create-payload-and-publish-the-products","name":"Shopify - Products - Prepare publishing - Create Payload & Publish the Products","description":"Prepare the payload and Publish the Synchronized Products into Shopify Channels/Stores/Publications","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"id":"&{id}"},"childrenPattern":"productPublications.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"productPublications.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"mutation publishablePublish(\n  $id: ID!, \n  $input: [PublicationInput!]!) {\n  publishablePublish(id: $id, input: $input) {\n    userErrors {\n      field\n      message\n    }\n  }\n}","variables":{"id":"&{id}","input":{"publicationId":"&{publicationId}"}}}}}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"update-storages-akeneo-shopify","name":"Update Storages (Akeneo - Shopify)","description":"To run the Incoming \"Akeneo fetch - families variants Axis into Alumio Storage\" and Incoming \"Akeneo to Shopify - Update Storages\" ","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"akeneo-fetch-families-variants-axis-to-alumio-storage"}},{"prototype":"run-incoming","parameters":{"incoming":"akeneo-to-shopify-update-storages"}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-fetch-families-variants-axis-to-alumio-storage","name":"Akeneo - Fetch - Families Variants Axes to Alumio Storage","description":"To save the Akeneo Families variants Axes into Alumio Storage","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"akeneo-client","request":{"uri":"/api/rest/v1/families","payload":[],"plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"next","parameters":{"pattern":"_links.next","pageLimit":1000}},"deserializer":{"prototype":"json","parameters":{"pattern":"_embedded.items","readMethod":"wholeFile"}}}},"transformers":["save-akeneo-famillies-variants-axis-to-alumio-storage"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"akeneo-client","name":"Akeneo - Client","description":"","object":{"prototype":"akeneo-http-client-v2","parameters":{"key":"01JPA3S718V753VVH3CR6Y4C9Y","baseUri":"${AKENEO_BASE_URL}","advanced":[],"clientId":"${AKENEO_CLIENT_ID}","password":"${AKENEO_PASSWORD}","username":"${AKENEO_USERNAME}","clientSecret":"${AKENEO_CLIENT_SECRET}"}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"save-akeneo-famillies-variants-axis-to-alumio-storage","name":"Save Akeneo famillies variants Axis to Alumio Storage","description":"Save the Akeneo Family Variant Axes into Alumio Storage ","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"axes":"&{_embedded.items}"},"transformer":{"meta":[],"prototype":"http-transformer","parameters":{"client":"akeneo-client","request":{"uri":"/api/rest/v1/families/&{code}/variants","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}}}},{"meta":[],"prototype":"pattern-copy","parameters":{"pattern":"axes.*.variant_attribute_sets.*.axes.*","conditions":[],"replacement":"product_options.$1$2$3"}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"product_options"}}}},{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["axes"]}},"conditions":[]}},{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"storage":"akeneo-family-variants-axes","storageKey":"&{code}"}}]}}]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-to-shopify-update-storages","name":"Akeneo to Shopify - Update storages","description":"Akeneo to Shopify - Update Storages (Save Shopify Channels/Publications into ALumio Storage)","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"request":{"uri":"https://httpbin.org/status/200","payload":[],"plugins":[],"payloadType":"data","authentications":[]}}},"transformers":["synchronize-products-fetch-shopify-channels-into-alumio-storage"]}},"owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"synchronize-products-fetch-shopify-channels-into-alumio-storage","name":"Synchronize Products - Fetch Shopify Channels into Alumio Storage","description":"Fetch the Shopify Channels/Publications into Alumio Storage","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"shopify-client","request":{"uri":"/admin/api/2025-01/graphql.json","method":"POST","payload":{"query":"query {\n  publications(first: 250) {\n    edges {\n      node {\n        id\n        name\n      }\n    }\n  }\n}"}}}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"data.publications.edges.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"storage-save-entity-in-storage","parameters":{"source":"node.id","storage":"shopify-channels-name-to-id","storageKey":"&{node.name}"}}]}}]}},"owner":null,"disabled":false}
